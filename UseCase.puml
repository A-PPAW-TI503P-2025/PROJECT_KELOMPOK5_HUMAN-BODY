@startuml
left to right direction
skinparam packageStyle rectangle

'--- DEFINISI AKTOR ---
actor "Pelayan / Admin" as User
actor "IoT Device (ESP32)" as Sensor << Device >>

'--- SISTEM BOUNDARY ---
rectangle "Sistem Smart Private Dining" {

    '--- USE CASE UTAMA USER ---
    usecase "Login Sistem" as UC_Login
    usecase "Monitoring Dashboard\n(Real-time)" as UC_Dashboard
    usecase "Kelola Reservasi Meja" as UC_Reservasi
    usecase "Terima Notifikasi\n(Meja Kosong/Dirty)" as UC_Notif
    usecase "Lihat Laporan Harian\n(History)" as UC_Laporan

    '--- USE CASE DETAIL (INCLUDE/EXTEND) ---
    usecase "Lihat Status Okupansi\n(Merah/Hijau)" as UC_Occupancy
    usecase "Lihat Suhu Ruangan" as UC_Temp
    usecase "Deteksi Ghost Booking\n(No-Show Alert)" as UC_Ghost

    '--- USE CASE IOT ---
    usecase "Kirim Data Sensor\n(Gerak & Suhu)" as UC_Send
    usecase "Update Status Otomatis" as UC_Update

    '--- RELASI USER ---
    User -- UC_Login
    User -- UC_Dashboard
    User -- UC_Reservasi
    User -- UC_Notif
    User -- UC_Laporan

    '--- RELASI IOT ---
    Sensor -- UC_Send

    '--- RELASI INCLUDE & EXTEND ---
    ' Dashboard menampilkan 2 hal utama
    UC_Dashboard ..> UC_Occupancy : <<include>>
    UC_Dashboard ..> UC_Temp : <<include>>

    ' Ghost Booking adalah perluasan dari Reservasi (jika kondisi terpenuhi)
    UC_Reservasi <.. UC_Ghost : <<extend>>
    
    ' IoT mengirim data, yang memicu update status sistem
    UC_Send ..> UC_Update : <<include>>
    
    ' Update status mempengaruhi Dashboard & Notifikasi
    UC_Update .> UC_Dashboard : triggers info
    UC_Update .> UC_Notif : triggers alert

}
@enduml